let $web = document.querySelector(".preview__about");
let $blockWeb = document.querySelector(".preview__buttons");
let $name = document.querySelector('#name');
let $nameText = document.querySelector('#name-text');
let $userName = document.querySelector('.web__input');
let $webLink = document.querySelector('.web__link');

function form() {
  let downloadBtn = document.querySelector('.preview__download');
  let form = document.querySelector('#form');
  $web.style.display = 'none';
  downloadBtn.style.display = 'none';
  form.style.display = 'flex';
  form.style.gap = '10px';
}


$web.addEventListener("click", form);

document.querySelector('#form').addEventListener('keypress', e =>{
    if(e.which == 13){
        let loginValue = document.querySelector('.web__input').value;
        let passwordValue = document.querySelector('#password').value;
        if(loginValue == ""){
            alert("Пустое поле");
            return;
        }
        sendRequest(requestURLusers).then(Users =>{
            for (let i = 0; i < Users.length; i++) {
                if((loginValue == Users[i].Login)&&(passwordValue == Users[i].Password)){
                    UserId = Users[i].id;
                    localStorage.clear();
                    localStorage.setItem('meUser',JSON.stringify(Users[i]));
                    infoCheck(Users[i]);
                    location.href = '../../messenger.html';
                    return;
                }
                else if((loginValue == Users[i].Login)&&(passwordValue != Users[i].Password)){
                    alert('Неправильный пароль');
                    return;
                }
            }
            alert('Нет такого пользователя.');
        })
    }
})
document.querySelector('.web__link ').addEventListener('click',e =>{
  let loginValue = document.querySelector('.web__input').value;
  let passwordValue = document.querySelector('#password').value;
  if(loginValue == ""){
      alert("Пустое поле");
      return;

  }
  sendRequest(requestURLusers).then(Users =>{
      for (let i = 0; i < Users.length; i++) {
          if((loginValue == Users[i].Login)&&(passwordValue == Users[i].Password)){
              UserId = Users[i].id;
              localStorage.clear();
              localStorage.setItem('meUser',JSON.stringify(Users[i]));
              infoCheck(Users[i]);
              location.href = '../../messenger.html';
              return;
          }
          else if((loginValue == Users[i].Login)&&(passwordValue != Users[i].Password)){
              alert('Неправильный пароль');
              return;
          }
      }
      alert('Нет такого пользователяя.');
  })
})
document.querySelector('.web__eye').addEventListener('click',e=>{
    if(document.querySelector('#password').type == "text"){
        document.querySelector('#password').type = ["password"];
        document.querySelector('.web__eye').setAttribute('src','img/manifest/icons/hide-password.svg');
    }
    else{
        document.querySelector('#password').type = "text";
        document.querySelector('.web__eye').setAttribute('src','img/manifest/icons/open-password.svg');
    }

})
